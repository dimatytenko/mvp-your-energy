{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorites.js"],"sourcesContent":["import icons from '../img/sprite.svg';\nimport { CustomPagination } from './ApiPagination';\nimport { LS_KEY } from './constants';\nimport { createMarkup } from './functions';\n\nconst elements = {\n  trashFavoritesBtn: document.querySelector('.js-exercises-trash-btn'),\n  StartFavoritesBtn: document.querySelector('.js-exercises-start-btn'),\n  exerciseFavorites: document.querySelector('.js-exercise-favorites'),\n  categoryErrorFavorites: document.querySelector('.js-favorites-error'),\n};\n\nconst element = elements.exerciseFavorites;\nconst errorFavorites = elements.categoryErrorFavorites;\nconst pagination = new CustomPagination();\n\ncreateExerciseList();\n\nfunction createExerciseList() {\n  const savedExercis = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\n\n  if (savedExercis.length === 0) {\n    errorFavorites.classList.remove('visually-hidden');\n    return;\n  }\n\n  if (window.innerWidth < 1440 && savedExercis.length > 8) {\n    element.innerHTML = createMarkup(savedExercis.slice(0, 8));\n    const totalPages = Math.ceil(savedExercis.length / 8);\n    pagination.init(null, totalPages, 8);\n  } else {\n    element.innerHTML = createMarkup(savedExercis);\n  }\n\n  const favoritesExerciseList =\n    document.getElementsByClassName('favorite-card-item');\n\n  for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n    favoritesExerciseList[i].addEventListener('click', onClickTrashBtn);\n    favoritesExerciseList[i].addEventListener('click', onClickStartBtn);\n  }\n\n  function onClickTrashBtn(event) {\n    const clickedTrashItem = event.target.closest('.js-exercises-trash-btn');\n    const exerciseItem = event.target.closest('.card-item');\n    if (clickedTrashItem) {\n      const exerciseId = exerciseItem.id;\n\n      let indexTrashItem = savedExercis.findIndex(\n        element => element._id === `${exerciseId}`\n      );\n      console.log(indexTrashItem);\n\n      for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n        favoritesExerciseList[i].removeEventListener(\n          'click',\n          onClickTrashBtn\n        );\n        favoritesExerciseList[i].removeEventListener(\n          'click',\n          onClickStartBtn\n        );\n      }\n\n      savedExercis.splice(indexTrashItem, 1);\n\n      localStorage.removeItem(LS_KEY);\n      localStorage.setItem(LS_KEY, JSON.stringify(savedExercis));\n\n      createExerciseList();\n    }\n  }\n\n  function onClickStartBtn(event) {\n    const clickedStartItem = event.target.closest('.js-exercises-start-btn');\n    const exerciseItem = event.target.closest('.card-item');\n    if (clickedStartItem) {\n      const exerciseId = exerciseItem.id;\n\n      let indexStartItem = savedExercis.findIndex(\n        element => element._id === `${exerciseId}`\n      );\n      console.log(indexStartItem);\n      for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n        favoritesExerciseList[i].removeEventListener(\n          'click',\n          onClickTrashBtn\n        );\n        favoritesExerciseList[i].removeEventListener(\n          'click',\n          onClickStartBtn\n        );\n      }\n\n      createExerciseList();\n    }\n  }\n}\n"],"names":["elements","element","errorFavorites","pagination","CustomPagination","createExerciseList","savedExercis","LS_KEY","createMarkup","totalPages","favoritesExerciseList","i","onClickTrashBtn","onClickStartBtn","event","clickedTrashItem","exerciseItem","exerciseId","indexTrashItem","clickedStartItem","indexStartItem"],"mappings":"iGAKA,MAAMA,EAAW,CACf,kBAAmB,SAAS,cAAc,yBAAyB,EACnE,kBAAmB,SAAS,cAAc,yBAAyB,EACnE,kBAAmB,SAAS,cAAc,wBAAwB,EAClE,uBAAwB,SAAS,cAAc,qBAAqB,CACtE,EAEMC,EAAUD,EAAS,kBACnBE,EAAiBF,EAAS,uBAC1BG,EAAa,IAAIC,EAEvBC,IAEA,SAASA,GAAqB,CAC5B,MAAMC,EAAe,KAAK,MAAM,aAAa,QAAQC,CAAM,CAAC,GAAK,GAEjE,GAAID,EAAa,SAAW,EAAG,CAC7BJ,EAAe,UAAU,OAAO,iBAAiB,EACjD,MACD,CAED,GAAI,OAAO,WAAa,MAAQI,EAAa,OAAS,EAAG,CACvDL,EAAQ,UAAYO,EAAaF,EAAa,MAAM,EAAG,CAAC,CAAC,EACzD,MAAMG,EAAa,KAAK,KAAKH,EAAa,OAAS,CAAC,EACpDH,EAAW,KAAK,KAAMM,EAAY,CAAC,CACvC,MACIR,EAAQ,UAAYO,EAAaF,CAAY,EAG/C,MAAMI,EACJ,SAAS,uBAAuB,oBAAoB,EAEtD,QAASC,EAAI,EAAGA,EAAID,EAAsB,OAAQC,GAAK,EACrDD,EAAsBC,GAAG,iBAAiB,QAASC,CAAe,EAClEF,EAAsBC,GAAG,iBAAiB,QAASE,CAAe,EAGpE,SAASD,EAAgBE,EAAO,CAC9B,MAAMC,EAAmBD,EAAM,OAAO,QAAQ,yBAAyB,EACjEE,EAAeF,EAAM,OAAO,QAAQ,YAAY,EACtD,GAAIC,EAAkB,CACpB,MAAME,EAAaD,EAAa,GAEhC,IAAIE,EAAiBZ,EAAa,UAChCL,GAAWA,EAAQ,MAAQ,GAAGgB,GACtC,EACM,QAAQ,IAAIC,CAAc,EAE1B,QAASP,EAAI,EAAGA,EAAID,EAAsB,OAAQC,GAAK,EACrDD,EAAsBC,GAAG,oBACvB,QACAC,CACV,EACQF,EAAsBC,GAAG,oBACvB,QACAE,CACV,EAGMP,EAAa,OAAOY,EAAgB,CAAC,EAErC,aAAa,WAAWX,CAAM,EAC9B,aAAa,QAAQA,EAAQ,KAAK,UAAUD,CAAY,CAAC,EAEzDD,GACD,CACF,CAED,SAASQ,EAAgBC,EAAO,CAC9B,MAAMK,EAAmBL,EAAM,OAAO,QAAQ,yBAAyB,EACjEE,EAAeF,EAAM,OAAO,QAAQ,YAAY,EACtD,GAAIK,EAAkB,CACpB,MAAMF,EAAaD,EAAa,GAEhC,IAAII,EAAiBd,EAAa,UAChCL,GAAWA,EAAQ,MAAQ,GAAGgB,GACtC,EACM,QAAQ,IAAIG,CAAc,EAC1B,QAAST,EAAI,EAAGA,EAAID,EAAsB,OAAQC,GAAK,EACrDD,EAAsBC,GAAG,oBACvB,QACAC,CACV,EACQF,EAAsBC,GAAG,oBACvB,QACAE,CACV,EAGMR,GACD,CACF,CACH"}
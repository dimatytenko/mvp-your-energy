{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorites.js"],"sourcesContent":["const elements = {\n    trashFavoritesBtn: document.querySelector(\".js-exercises-trash-btn\"),\n    StartFavoritesBtn: document.querySelector(\".js-exercises-start-btn\"),\n    exerciseFavorites: document.querySelector('.js-exercise-favorites'),\n    categoryErrorFavorites: document.querySelector('.js-favorites-error'),\n};\n\n\nconst element = elements.exerciseFavorites;\nconst errorFavorites = elements.categoryErrorFavorites;\n\nconsole.log(elements.exerciseFavorites);\n\nconst LS_KEY = \"savedExercises\";\n\ncreateExerciseList();\n\nfunction createExerciseList() {\n    // const favoritesExerciseList = document.getElementsByClassName('favorite-card-item');\n\n    const savedExercis = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\n\n    if (savedExercis.length === 0) {\n        console.log('savedExercis');\n        errorFavorites.classList.remove('visually-hidden');\n        return;\n    }\n\n    console.log(savedExercis);\n\n    element.innerHTML = createMarkup(savedExercis);\n    const favoritesExerciseList = document.getElementsByClassName('favorite-card-item');\n    \n    for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n        console.log(favoritesExerciseList[i]);\n        favoritesExerciseList[i].addEventListener('click', onClickTrashBtn);\n        favoritesExerciseList[i].addEventListener('click', onClickStartBtn);\n    }\n\n    function onClickTrashBtn(event) {\n        const clickedTrashItem = event.target.closest('.js-exercises-trash-btn');\n        const exerciseItem = event.target.closest('.card-item');\n        if (clickedTrashItem) {\n            const exerciseId = exerciseItem.id;\n\n            let indexTrashItem = savedExercis.findIndex(element => element._id === `${exerciseId}`);  \n            console.log(indexTrashItem);  \n            console.log(savedExercis[indexTrashItem]); \n            if (indexTrashItem >= 0) {\n                for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n                    // console.log(favoritesExerciseList[i]);\n                    favoritesExerciseList[i].removeEventListener('click', onClickTrashBtn);\n                    favoritesExerciseList[i].removeEventListener('click', onClickStartBtn);\n                }\n\n                savedExercis.splice(indexTrashItem, 1)\n                // console.log(savedExercis);  \n\n                localStorage.removeItem(LS_KEY);\n                localStorage.setItem(LS_KEY, JSON.stringify(savedExercis));\n            }\n            \n            element.innerHTML = createMarkup(savedExercis);\n            createExerciseList();\n        }        \n\n    }\n    \n    function onClickStartBtn(event) {\n        const clickedStartItem = event.target.closest('.js-exercises-start-btn');\n        const exerciseItem = event.target.closest('.card-item');\n        console.log(window.location.href);\n        if (clickedStartItem) {\n            const exerciseId = exerciseItem.id;\n\n            let indexTrashItem = savedExercis.findIndex(element => element._id === `${exerciseId}`);  \n            console.log(indexTrashItem);  \n            console.log(savedExercis[indexTrashItem]); \n            if (indexTrashItem >= 0) {\n                // savedExercis.splice(indexTrashItem, 1)\n                console.log(indexTrashItem);  \n\n                localStorage.removeItem(LS_KEY);\n                localStorage.setItem(LS_KEY, JSON.stringify(savedExercis));\n            }\n            \n            element.innerHTML = createMarkup(savedExercis);\n            createExerciseList();\n        }\n    }       \n}\n\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ _id, target, bodyPart, burnedCalories, time, name }) => `\n            <li class=\"card-item favorite-card-item\" id=${_id}>\n                <div class=\"card-menu\">\n                <div class=\"exercises-box\">\n                    <div class=\"card-menu-workout\">WORKOUT</div>\n                    <button class=\"exercises-trash-btn js-exercises-trash-btn\" type=\"button\">\n                        <svg\n                            class=\"card-menu-trash-icon\"\n                            width=\"16\"\n                            height=\"16\"\n                        >\n                            <use href=\"./img/sprite.svg#icon-trash\"></use>\n                        </svg>\n                    </button>\n                </div>\n\n                <div class=\"card-menu-start\">\n                    <button class=\"exercises-start-btn js-exercises-start-btn\" type=\"button\">\n                        <p class=\"card-menu-start-text\">Start</p>\n                        <svg\n                            class=\"card-menu-start-icon\"\n                            width=\"16\"\n                            height=\"16\"\n                        >\n                            <use href=\"./img/sprite.svg#icon-arrow-right\"></use>\n                        </svg>\n                    </button>\n                </div>\n                </div>\n\n                <div class=\"card-title\">\n                <div class=\"card-title-icon-box\">\n                    <svg\n                    class=\"card-title-icon\"\n                    width=\"24\"\n                    height=\"24\"\n                    >\n                     <use href=\"./img/sprite.svg#icon-run\"></use>\n                    </svg>\n                </div>\n                <p class=\"card-title-text\">${name}</p>\n                </div>\n\n                <div class=\"card-info\">\n                <div class=\"card-info-about\">\n                    <p class=\"card-info-about-name\">\n                    Burned calories:\n                    <span class=\"card-info-about-value\">${burnedCalories} / ${time} min</span>\n                    </p>\n                </div>\n                <div class=\"card-info-about\">\n                    <p class=\"card-info-about-name\">\n                    Body part: <span class=\"card-info-about-value\">${bodyPart}</span>\n                    </p>\n                </div>\n                <div class=\"card-info-about\">\n                    <p class=\"card-info-about-name\">\n                    Target: <span class=\"card-info-about-value\">${target}</span>\n                    </p>\n                </div>\n                </div>\n            </li>\n        `) .join(\"\");\n}\n"],"names":["elements","element","errorFavorites","LS_KEY","createExerciseList","savedExercis","createMarkup","favoritesExerciseList","i","onClickTrashBtn","onClickStartBtn","event","clickedTrashItem","exerciseItem","exerciseId","indexTrashItem","clickedStartItem","arr","_id","target","bodyPart","burnedCalories","time","name"],"mappings":"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"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorites.js"],"sourcesContent":["import icons from '../img/sprite.svg';\n\nconst elements = {\n  trashFavoritesBtn: document.querySelector('.js-exercises-trash-btn'),\n  StartFavoritesBtn: document.querySelector('.js-exercises-start-btn'),\n  exerciseFavorites: document.querySelector('.js-exercise-favorites'),\n  categoryErrorFavorites: document.querySelector('.js-favorites-error'),\n};\n\nconst element = elements.exerciseFavorites;\nconst errorFavorites = elements.categoryErrorFavorites;\n\nconst LS_KEY = 'savedExercises';\n\ncreateExerciseList();\n\nfunction createExerciseList() {\n  const savedExercis = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\n\n  if (savedExercis.length === 0) {\n    errorFavorites.classList.remove('visually-hidden');\n    return;\n  }\n\n  element.innerHTML = createMarkup(savedExercis);\n  const favoritesExerciseList =\n    document.getElementsByClassName('favorite-card-item');\n\n  for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n    favoritesExerciseList[i].addEventListener('click', onClickTrashBtn);\n    favoritesExerciseList[i].addEventListener('click', onClickStartBtn);\n  }\n\n  function onClickTrashBtn(event) {\n    const clickedTrashItem = event.target.closest('.js-exercises-trash-btn');\n    const exerciseItem = event.target.closest('.card-item');\n    if (clickedTrashItem) {\n      const exerciseId = exerciseItem.id;\n\n      let indexTrashItem = savedExercis.findIndex(\n        element => element._id === `${exerciseId}`\n      );\n\n      if (indexTrashItem >= 0) {\n        for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n          favoritesExerciseList[i].removeEventListener(\n            'click',\n            onClickTrashBtn\n          );\n          favoritesExerciseList[i].removeEventListener(\n            'click',\n            onClickStartBtn\n          );\n        }\n\n        savedExercis.splice(indexTrashItem, 1);\n\n        localStorage.removeItem(LS_KEY);\n        localStorage.setItem(LS_KEY, JSON.stringify(savedExercis));\n      }\n\n      element.innerHTML = createMarkup(savedExercis);\n      createExerciseList();\n    }\n  }\n\n  function onClickStartBtn(event) {\n    const clickedStartItem = event.target.closest('.js-exercises-start-btn');\n    const exerciseItem = event.target.closest('.card-item');\n    if (clickedStartItem) {\n      const exerciseId = exerciseItem.id;\n\n      let indexTrashItem = savedExercis.findIndex(\n        element => element._id === `${exerciseId}`\n      );\n      if (indexTrashItem >= 0) {\n        localStorage.removeItem(LS_KEY);\n        localStorage.setItem(LS_KEY, JSON.stringify(savedExercis));\n      }\n\n      element.innerHTML = createMarkup(savedExercis);\n      createExerciseList();\n    }\n  }\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ _id, target, bodyPart, burnedCalories, time, name }) => `\n            <li class=\"card-item favorite-card-item\" id=${_id}>\n                <div class=\"card-menu\">\n                <div class=\"exercises-box\">\n                    <div class=\"card-menu-workout\">WORKOUT</div>\n                    <button class=\"exercises-trash-btn js-exercises-trash-btn\" type=\"button\">\n                        <svg\n                            class=\"card-menu-trash-icon\"\n                            width=\"16\"\n                            height=\"16\"\n                        >\n                            <use href=\"${icons}#icon-trash\"></use>\n                        </svg>\n                    </button>\n                </div>\n\n                <div class=\"card-menu-start\">\n                    <button class=\"exercises-start-btn js-exercises-start-btn\" type=\"button\">\n                        <p class=\"card-menu-start-text\">Start</p>\n                        <svg\n                            class=\"card-menu-start-icon\"\n                            width=\"16\"\n                            height=\"16\"\n                        >\n                            <use href=\"${icons}#icon-arrow-right\"></use>\n                        </svg>\n                    </button>\n                </div>\n                </div>\n\n                <div class=\"card-title\">\n                <div class=\"card-title-icon-box\">\n                    <svg\n                    class=\"card-title-icon\"\n                    width=\"24\"\n                    height=\"24\"\n                    >\n                     <use href=\"${icons}#icon-run\"></use>\n                    </svg>\n                </div>\n                <p class=\"card-title-text\">${name}</p>\n                </div>\n\n                <div class=\"card-info\">\n                <div class=\"gap-card\">\n                    <p class=\"card-info-about-name\">\n                    Burned calories:\n                    <div class=\"card-info-about-value card-time\">${burnedCalories} / ${time} min</div>\n                    </p>\n                </div>\n                <div class=\"gap-card\">\n                    <p class=\"card-info-about-name\">\n                    Body part:\n                    <div class=\"card-info-about-value card-body\">${bodyPart}</div>\n                    </p>\n                </div>\n                <div class=\"gap-card\">\n                    <p class=\"card-info-about-name\">\n                    Target:\n                    <div class=\"card-info-about-value card-target\">${target}</div>\n                    </p>\n                </div>\n                </div>\n            </li>\n        `\n    )\n    .join('');\n}\n"],"names":["elements","element","errorFavorites","LS_KEY","createExerciseList","savedExercis","createMarkup","favoritesExerciseList","i","onClickTrashBtn","onClickStartBtn","event","clickedTrashItem","exerciseItem","exerciseId","indexTrashItem","clickedStartItem","arr","_id","target","bodyPart","burnedCalories","time","name","icons"],"mappings":"mFAEA,MAAMA,EAAW,CACf,kBAAmB,SAAS,cAAc,yBAAyB,EACnE,kBAAmB,SAAS,cAAc,yBAAyB,EACnE,kBAAmB,SAAS,cAAc,wBAAwB,EAClE,uBAAwB,SAAS,cAAc,qBAAqB,CACtE,EAEMC,EAAUD,EAAS,kBACnBE,EAAiBF,EAAS,uBAE1BG,EAAS,iBAEfC,IAEA,SAASA,GAAqB,CAC5B,MAAMC,EAAe,KAAK,MAAM,aAAa,QAAQF,CAAM,CAAC,GAAK,GAEjE,GAAIE,EAAa,SAAW,EAAG,CAC7BH,EAAe,UAAU,OAAO,iBAAiB,EACjD,MACD,CAEDD,EAAQ,UAAYK,EAAaD,CAAY,EAC7C,MAAME,EACJ,SAAS,uBAAuB,oBAAoB,EAEtD,QAASC,EAAI,EAAGA,EAAID,EAAsB,OAAQC,GAAK,EACrDD,EAAsBC,GAAG,iBAAiB,QAASC,CAAe,EAClEF,EAAsBC,GAAG,iBAAiB,QAASE,CAAe,EAGpE,SAASD,EAAgBE,EAAO,CAC9B,MAAMC,EAAmBD,EAAM,OAAO,QAAQ,yBAAyB,EACjEE,EAAeF,EAAM,OAAO,QAAQ,YAAY,EACtD,GAAIC,EAAkB,CACpB,MAAME,EAAaD,EAAa,GAEhC,IAAIE,EAAiBV,EAAa,UAChCJ,GAAWA,EAAQ,MAAQ,GAAGa,GACtC,EAEM,GAAIC,GAAkB,EAAG,CACvB,QAASP,EAAI,EAAGA,EAAID,EAAsB,OAAQC,GAAK,EACrDD,EAAsBC,GAAG,oBACvB,QACAC,CACZ,EACUF,EAAsBC,GAAG,oBACvB,QACAE,CACZ,EAGQL,EAAa,OAAOU,EAAgB,CAAC,EAErC,aAAa,WAAWZ,CAAM,EAC9B,aAAa,QAAQA,EAAQ,KAAK,UAAUE,CAAY,CAAC,CAC1D,CAEDJ,EAAQ,UAAYK,EAAaD,CAAY,EAC7CD,GACD,CACF,CAED,SAASM,EAAgBC,EAAO,CAC9B,MAAMK,EAAmBL,EAAM,OAAO,QAAQ,yBAAyB,EACjEE,EAAeF,EAAM,OAAO,QAAQ,YAAY,EACtD,GAAIK,EAAkB,CACpB,MAAMF,EAAaD,EAAa,GAEXR,EAAa,UAChCJ,GAAWA,EAAQ,MAAQ,GAAGa,GACtC,GAC4B,IACpB,aAAa,WAAWX,CAAM,EAC9B,aAAa,QAAQA,EAAQ,KAAK,UAAUE,CAAY,CAAC,GAG3DJ,EAAQ,UAAYK,EAAaD,CAAY,EAC7CD,GACD,CACF,CACH,CAEA,SAASE,EAAaW,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,IAAAC,EAAK,OAAAC,EAAQ,SAAAC,EAAU,eAAAC,EAAgB,KAAAC,EAAM,KAAAC,CAAI,IAAO;AAAA,0DACPL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAUjBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAaAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAaPA;AAAA;AAAA;AAAA,6CAGWD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAOsBF,OAAoBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAMpBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qEAMED;AAAA;AAAA;AAAA;AAAA;AAAA,SAMhE,EACA,KAAK,EAAE,CACZ"}
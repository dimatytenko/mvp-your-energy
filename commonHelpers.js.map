{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorites.js"],"sourcesContent":["import { CustomPagination } from './ApiPagination';\nimport { LS_KEY } from './constants';\nimport { createMarkup } from './functions';\nimport { refs } from './refs';\n\nconst elements = {\n  trashFavoritesBtn: document.querySelector('.js-exercises-trash-btn'),\n  StartFavoritesBtn: document.querySelector('.js-exercises-start-btn'),\n  exerciseFavorites: document.querySelector('.js-exercise-favorites'),\n  categoryErrorFavorites: document.querySelector('.js-favorites-error'),\n};\n\nconst element = elements.exerciseFavorites;\nconst errorFavorites = elements.categoryErrorFavorites;\nconst pagination = new CustomPagination();\n\ncreateExerciseList();\n\nfunction createExerciseList() {\n  const savedExercis = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\n\n  if (savedExercis.length === 0) {\n    errorFavorites.classList.remove('visually-hidden');\n    return;\n  }\n\n  initPagination(savedExercis);\n  initListeners();\n}\n\nfunction onClickTrashBtn(event) {\n  const clickedTrashItem = event.target.closest('.js-exercises-trash-btn');\n  const exerciseItem = event.target.closest('.card-item');\n  if (clickedTrashItem) {\n    const favoritesExerciseList =\n      document.getElementsByClassName('favorite-card-item');\n    const savedExercis = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\n\n    const exerciseId = exerciseItem.id;\n\n    let indexTrashItem = savedExercis.findIndex(\n      element => element._id === `${exerciseId}`\n    );\n    console.log(indexTrashItem);\n\n    for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n      favoritesExerciseList[i].removeEventListener('click', onClickTrashBtn);\n      favoritesExerciseList[i].removeEventListener('click', onClickStartBtn);\n    }\n\n    savedExercis.splice(indexTrashItem, 1);\n\n    localStorage.removeItem(LS_KEY);\n    localStorage.setItem(LS_KEY, JSON.stringify(savedExercis));\n\n    createExerciseList();\n  }\n}\n\nfunction onClickStartBtn(event) {\n  const clickedStartItem = event.target.closest('.js-exercises-start-btn');\n  const exerciseItem = event.target.closest('.card-item');\n  if (clickedStartItem) {\n    const favoritesExerciseList =\n      document.getElementsByClassName('favorite-card-item');\n    const savedExercis = JSON.parse(localStorage.getItem(LS_KEY)) ?? [];\n\n    const exerciseId = exerciseItem.id;\n\n    let indexStartItem = savedExercis.findIndex(\n      element => element._id === `${exerciseId}`\n    );\n    console.log(indexStartItem);\n    for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n      favoritesExerciseList[i].removeEventListener('click', onClickTrashBtn);\n      favoritesExerciseList[i].removeEventListener('click', onClickStartBtn);\n    }\n\n    createExerciseList();\n  }\n}\n\nfunction initListeners() {\n  const favoritesExerciseList =\n    document.getElementsByClassName('favorite-card-item');\n\n  for (let i = 0; i < favoritesExerciseList.length; i += 1) {\n    favoritesExerciseList[i].addEventListener('click', onClickTrashBtn);\n    favoritesExerciseList[i].addEventListener('click', onClickStartBtn);\n  }\n}\n\nfunction initPagination(savedExercis) {\n  if (window.innerWidth < 1440) {\n    element.innerHTML = createMarkup(savedExercis.slice(0, 8));\n    const totalPages = Math.ceil(savedExercis.length / 8);\n    pagination.init(null, totalPages, 8, initListeners);\n\n    if (savedExercis.length <= 8) {\n      refs.paginationBox.classList.add('visually-hidden');\n    }\n  } else {\n    element.innerHTML = createMarkup(savedExercis);\n  }\n}\n"],"names":["elements","element","errorFavorites","pagination","CustomPagination","createExerciseList","savedExercis","LS_KEY","initPagination","initListeners","onClickTrashBtn","event","clickedTrashItem","exerciseItem","favoritesExerciseList","exerciseId","indexTrashItem","i","onClickStartBtn","clickedStartItem","indexStartItem","createMarkup","totalPages","refs"],"mappings":"wGAKA,MAAMA,EAAW,CACf,kBAAmB,SAAS,cAAc,yBAAyB,EACnE,kBAAmB,SAAS,cAAc,yBAAyB,EACnE,kBAAmB,SAAS,cAAc,wBAAwB,EAClE,uBAAwB,SAAS,cAAc,qBAAqB,CACtE,EAEMC,EAAUD,EAAS,kBACnBE,EAAiBF,EAAS,uBAC1BG,EAAa,IAAIC,EAEvBC,IAEA,SAASA,GAAqB,CAC5B,MAAMC,EAAe,KAAK,MAAM,aAAa,QAAQC,CAAM,CAAC,GAAK,GAEjE,GAAID,EAAa,SAAW,EAAG,CAC7BJ,EAAe,UAAU,OAAO,iBAAiB,EACjD,MACD,CAEDM,EAAeF,CAAY,EAC3BG,GACF,CAEA,SAASC,EAAgBC,EAAO,CAC9B,MAAMC,EAAmBD,EAAM,OAAO,QAAQ,yBAAyB,EACjEE,EAAeF,EAAM,OAAO,QAAQ,YAAY,EACtD,GAAIC,EAAkB,CACpB,MAAME,EACJ,SAAS,uBAAuB,oBAAoB,EAChDR,EAAe,KAAK,MAAM,aAAa,QAAQC,CAAM,CAAC,GAAK,GAE3DQ,EAAaF,EAAa,GAEhC,IAAIG,EAAiBV,EAAa,UAChCL,GAAWA,EAAQ,MAAQ,GAAGc,GACpC,EACI,QAAQ,IAAIC,CAAc,EAE1B,QAASC,EAAI,EAAGA,EAAIH,EAAsB,OAAQG,GAAK,EACrDH,EAAsBG,GAAG,oBAAoB,QAASP,CAAe,EACrEI,EAAsBG,GAAG,oBAAoB,QAASC,CAAe,EAGvEZ,EAAa,OAAOU,EAAgB,CAAC,EAErC,aAAa,WAAWT,CAAM,EAC9B,aAAa,QAAQA,EAAQ,KAAK,UAAUD,CAAY,CAAC,EAEzDD,GACD,CACH,CAEA,SAASa,EAAgBP,EAAO,CAC9B,MAAMQ,EAAmBR,EAAM,OAAO,QAAQ,yBAAyB,EACjEE,EAAeF,EAAM,OAAO,QAAQ,YAAY,EACtD,GAAIQ,EAAkB,CACpB,MAAML,EACJ,SAAS,uBAAuB,oBAAoB,EAChDR,EAAe,KAAK,MAAM,aAAa,QAAQC,CAAM,CAAC,GAAK,GAE3DQ,EAAaF,EAAa,GAEhC,IAAIO,EAAiBd,EAAa,UAChCL,GAAWA,EAAQ,MAAQ,GAAGc,GACpC,EACI,QAAQ,IAAIK,CAAc,EAC1B,QAASH,EAAI,EAAGA,EAAIH,EAAsB,OAAQG,GAAK,EACrDH,EAAsBG,GAAG,oBAAoB,QAASP,CAAe,EACrEI,EAAsBG,GAAG,oBAAoB,QAASC,CAAe,EAGvEb,GACD,CACH,CAEA,SAASI,GAAgB,CACvB,MAAMK,EACJ,SAAS,uBAAuB,oBAAoB,EAEtD,QAASG,EAAI,EAAGA,EAAIH,EAAsB,OAAQG,GAAK,EACrDH,EAAsBG,GAAG,iBAAiB,QAASP,CAAe,EAClEI,EAAsBG,GAAG,iBAAiB,QAASC,CAAe,CAEtE,CAEA,SAASV,EAAeF,EAAc,CACpC,GAAI,OAAO,WAAa,KAAM,CAC5BL,EAAQ,UAAYoB,EAAaf,EAAa,MAAM,EAAG,CAAC,CAAC,EACzD,MAAMgB,EAAa,KAAK,KAAKhB,EAAa,OAAS,CAAC,EACpDH,EAAW,KAAK,KAAMmB,EAAY,EAAGb,CAAa,EAE9CH,EAAa,QAAU,GACzBiB,EAAK,cAAc,UAAU,IAAI,iBAAiB,CAExD,MACItB,EAAQ,UAAYoB,EAAaf,CAAY,CAEjD"}